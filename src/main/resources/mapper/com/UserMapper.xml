<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.pen.app.com.mapper.UserMapper">
<!-- 로그인 정보 -->
  <select id="getUser" resultType="UserVO">
    select *
    from COM_INFO_EMP JOIN COM_CODE_AUTH USING (AUTH_CODE)
    where EMP_ID = #{empId}
  </select>
  <!-- 본인 정보 수정 -->
  <update id="modifyUser">
  	UPDATE COM_INFO_EMP SET 
  	<if test="empPw != null and empPw != ''.toString()">
  		emp_pw = ${empPw}, 
  	</if>
 	emp_tel = ${empTel}
  </update>
  <!-- 유저 리스트 출력 -->
  <select id="getUserList" resultType="UserVO">
  	SELECT * FROM COM_INFO_EMP JOIN COM_CODE_AUTH USING(AUTH_CODE)
  </select>
  <!-- 유저 정보수정 -->
  <update id="modifyUserList">
  	UPDATE COM_INFO_EMP SET
  	
  </update>
  
  <select id="getUserWithName" resultType="UserVO">
  	SELECT * FROM COM_INFO_EMP JOIN COM_CODE_AUTH USING (AUTH_CODE) WHERE EMP_NAME = #{empName}
  </select>
  
  <select id="getAuthList" resultType="AuthVO">
  	select * from com_code_auth
  </select>
  
  <update id="resetPassword">
  	UPDATE COM_INFO_EMP SET EMP_PW = #{empPw} WHERE EMP_NUM = #{empNum}
  </update>
  
  <select id="getEmpCode" resultType="String">
  	select com_code||'-'||LPAD(emp_seq.nextval,4,'0') from com_code where code_name = '사원코드'
  </select>
</mapper>