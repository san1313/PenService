<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layout/template}">
<head>
<meta charset="UTF-8">
<title>ordList</title>
<script src="https://kit.fontawesome.com/56e7c5522c.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://uicdn.toast.com/tui.time-picker/latest/tui-time-picker.css">
<script src="https://uicdn.toast.com/tui.time-picker/latest/tui-time-picker.js"></script>
<link rel="stylesheet" href="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.css" />
<script src="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.js"></script>
<link rel="stylesheet" href="https://uicdn.toast.com/grid/latest/tui-grid.css" />
<script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>

<style>

.process{
display : inline;
}

.container-fluid{
text-align : left !important;
}

.ordbtn{
float : right;
margin-bottom : 1px;
}
.ordbtn button{
margin-right : 2px;
}
.ordReg{
margin-top: 30px;
}
</style>

<script src="https://code.jquery.com/jquery-1.11.3.js"></script>
<link rel="stylesheet" href="https://uicdn.toast.com/grid/latest/tui-grid.css" />
<script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script> <!-- 그리드 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script> <!-- 모달 -->
</head>


<body>

<div layout:fragment = "title">
<h1>주문서 관리</h1> 
<button type="button" class="btn btn-outline-secondary" data-toggle="modal" data-target=".bd-ordList-modal-lg">주문서<br>등록하기</button>
</div>

<div layout:fragment = "content">

  진행구분 <label class="process">진행
    <input type="checkbox" checked="checked">
    <span class="checkmark"></span>
  </label>
  
  <label class="process">완료
    <input type="checkbox">
    <span class="checkmark"></span>
  </label>
  
  <label class="process">전체
    <input type="checkbox">
    <span class="checkmark"></span>
  </label>
 

<p>거래처 <input type ="text"> <button id="accountList" class="fa-solid fa-magnifying-glass" data-toggle="modal" data-target=".bd-account-modal-lg" ></button></p>  
<p>제품명 <input type ="text"> <button id="productList"class="fa-solid fa-magnifying-glass" data-toggle="modal" data-target=".bd-product-modal-lg"></button></p>


<!-- 거래처리스트 modal -->
<div class="modal fade bd-account-modal-lg" id="accountListModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <h1>거래처 목록</h1>
      <p>거래처명 <input type = "text"> <button type = "submit" class="fa-solid fa-magnifying-glass"></button>
      <div id="accountGrid"></div>
      <button>확인</button> <button>취소</button>
      </div>
  </div>
</div>
      
<script src="/plugins/jquery/jquery.min.js"></script>
<script>
 	$.ajax({
 		url : "/bns/accList",
 		method : "GET",
 		dataType : "JSON",
 		success : function(result){
 			account_Grid.resetData(result);
 			account_Grid.refreshLayout();
 		}
 	});
    var account_Grid = new tui.Grid({
      el: document.getElementById('accountGrid'),
      scrollX: false,
      scrollY: false,
      rowHeaders: ['checkbox'],
      columns: [
        {
          header: '거래처코드',
          name: 'accCode'
        },
        {
          header: '거래처명',
          name: 'accName'
        }
    
      ]
    });
    $(function(){
    	$('#accountListModal').on('shown.bs.modal', function(){
    		account_Grid.refreshLayout();
    	})
    })
</script>
    
<!-- 거래처리스트 모달 끝 -->

<!-- 제품 리스트 modal -->
<div class="modal fade bd-product-modal-lg" id = "productListModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <h1>제품 목록</h1>
      
      <p>제품명 <input type = "text"> <button type = "submit" class="fa-solid fa-magnifying-glass"></button>
     
      <div id="productGrid"></div>
       <button>확인</button> <button>취소</button>
    </div>
  </div>
</div>

<script src="/plugins/jquery/jquery.min.js"></script>
<script>
 	$.ajax({
 		url : "/bns/prodList",
 		method : "GET",
 		dataType : "JSON",
 		success : function(result){
 			product_Grid.resetData(result);
 			product_Grid.refreshLayout();
 		}
 	});
    var product_Grid = new tui.Grid({
      el: document.getElementById('productGrid'),
      scrollX: false,
      scrollY: false,
      rowHeaders: ['checkbox'],
      columns: [
        {
          header: '제품코드',
          name: 'prodCode'
        },
        {
          header: '제품명',
          name: 'prodName'
        }
    
      ]
    });
    $(function(){
    	$('#productListModal').on('shown.bs.modal', function(){
    		product_Grid.refreshLayout();
    	})
    })
</script>
<!-- 제품 리스트 모달 끝 -->

    <!-- 주문서등록 modal -->
<div class="modal fade bd-ordList-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
    
      <div class="modal-header">
      <h1 class = "modal-title">주문서 등록</h1>
		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>      
      </div>
      
      <form method="get" action ="/insertOrdList">
          <div class="mb-3">
            <label for="recipient-name" class="col-form-label">주문코드 </label>
            <input type="text" class="form-control" name="ordCode">
          </div>
          <div class="mb-3">
            <label for="recipient-name" class="col-form-label">제품명 <button type="button" class="fa-solid fa-magnifying-glass" data-toggle="modal" data-target=".bd-smallproduct-modal-sm"></button> </label>
            <input type="text" class="form-control" name="prodName">
          </div>
          <div class="mb-3">
            <label for="recipient-name" class="col-form-label">제품코드 </label>
            <input type="text" class="form-control" name="prodCode">
          </div>
          <div class="mb-3">
            <label for="recipient-name" class="col-form-label">주문량 </label>
            <input type="text" class="form-control" name="ordDetQuan">
          </div>
          <div class="mb-3">
            <label for="recipient-name" class="col-form-label">단가 </label>
            <input type="text" class="form-control" name="ordDetPrice">
          </div>
          <div class="mb-3">
            <label for="recipient-name" class="col-form-label">거래처명 <button type="button"class="fa-solid fa-magnifying-glass" data-toggle="modal" data-target=".bd-smallaccount-modal-sm"></button> </label>
            <input type="text" class="form-control" name="accName">
          </div>
          <div class="mb-3">
            <label for="recipient-name" class="col-form-label">거래처코드 </label>
            <input type="text" class="form-control" name="accCode">
          </div>
          <div class="mb-3">
            <label for="recipient-name" class="col-form-label">주문일자 </label>
            <input type="text" class="form-control" name="ordDate">
          </div>
          <div class="mb-3">
            <label for="recipient-name" class="col-form-label">납기일자 </label>
            <input type="text" class="form-control" name="ordDueDate">
          </div>
          <div class="mb-3">
            <label for="recipient-name" class="col-form-label">담당자명 </label>
            <input type="text" class="form-control" name="empName">
          </div>
          <div class="mb-3">
            <label for="message-text" class="col-form-label">비고 </label>
            <textarea class="form-control" name="ordNote"></textarea>
          </div>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
        <button type="submit" class="btn btn-primary">등록</button>
       
<!-- 주문서 등록내의 거래처리스트모달 -->
<div class="modal fade bd-smallaccount-modal-sm" id = "accountRegModal"tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
    <h2>거래처 목록</h2>
    <p>거래처명 <input type = "text"> <button type = "submit" class="fa-solid fa-magnifying-glass"></button></p>
      <div id="accountRegGrid"></div>
      <button>확인</button><button>취소</button>
    </div>
  </div>
</div>

<script src="/plugins/jquery/jquery.min.js"></script>
<script>
 	$.ajax({
 		url : "/bns/accList",
 		method : "GET",
 		dataType : "JSON",
 		success : function(result){
 			accountReg_Grid.resetData(result);
 			accountReg_Grid.refreshLayout();
 		}
 	});
    var accountReg_Grid = new tui.Grid({
      el: document.getElementById('accountRegGrid'),
      scrollX: false,
      scrollY: false,
      rowHeaders: ['checkbox'],
      columns: [
        {
          header: '거래처코드',
          name: 'accCode'
        },
        {
          header: '거래처명',
          name: 'accName'
        }
    
      ]
    });
    $(function(){
    	$('#accountRegModal').on('shown.bs.modal', function(){
    		accountReg_Grid.refreshLayout();
    	})
    })
</script>

<!-- 주문서 등록내의 거래처리스트모달 끝 -->

<!-- 주문서 등록내의 제품리스트모달 -->
<div class="modal fade bd-smallproduct-modal-sm" id = "productRegModal"tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
    <h2>제품리스트</h2>
    <p>제품명 <input type = "text"> <button type = "submit" class="fa-solid fa-magnifying-glass"></button></p>
      <div id="productRegGrid"></div>
      <button>확인</button><button>취소</button>
    </div>
  </div>
</div>
      
     </form>
      
      
    </div>
  </div>
</div>

<script src="/plugins/jquery/jquery.min.js"></script>
<script>
 	$.ajax({
 		url : "/bns/prodList",
 		method : "GET",
 		dataType : "JSON",
 		success : function(result){
 			productReg_Grid.resetData(result);
 			productReg_Grid.refreshLayout();
 		}
 	});
    var productReg_Grid = new tui.Grid({
      el: document.getElementById('productRegGrid'),
      scrollX: false,
      scrollY: false,
      rowHeaders: ['checkbox'],
      columns: [
        {
          header: '제품코드',
          name: 'prodCode'
        },
        {
          header: '제품명',
          name: 'prodName'
        }
    
      ]
    });
    $(function(){
    	$('#productRegModal').on('shown.bs.modal', function(){
    		productReg_Grid.refreshLayout();
    	})
    })
</script>
<!-- 주문서 등록내의 제품리스트 모달 끝 -->

<!-- 주문서 등록 모달 끝 -->

<p>주문일자 - 납기일자 <input type = "date"><input type = "date"> <button>조회</button> <button>초기화</button></p>
<div class = "ordbtn">
<button >주문서 수정</button> <button >주문서 취소</button>
</div>
<br>




<!----------------------------------------------- -그리드시작-------------------------------------------- -->
<div id="grid"></div>
<script src="/plugins/jquery/jquery.min.js"></script>
<script>
 	$.ajax({
 		url : "/bns/ordListAjax",
 		method : "GET",
 		dataType : "JSON",
 		success : function(result){
 			grid.resetData(result);
 		}
 	});
    var grid = new tui.Grid({
      el: document.getElementById('grid'),
      scrollX: false,
      scrollY: false,
      rowHeaders: ['checkbox'],
      columns: [
        {
          header: '주문코드',
          name: 'ordCode'
        },
        {
          header: '거래처코드',
          name: 'accCode'
        },
        {
          header: '거래처명',
          name: 'accName'
        },
        {
          header: '주문일자',
          name: 'ordDate'
        },
        {
          header: '납기일자',
          name: 'ordDueDate'
        },
        {
            header: '진행상황',
            name: 'ordProgress'
          },
        {
            header: '담당자명',
            name: 'empNum'
          },
        {
            header: '비고',
            name: 'ordNote'
          }
    
      ]
    });
    <!----------------------------------------- 그리드끝 ----------------------------------------->
    

    
    </script>
  
</div>
</body>
</html>